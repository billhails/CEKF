// BUG: Type checker crashes with abort() instead of proper error
// When a macro references an undefined variable, tc_analyze.c line 377 
// calls abort() instead of returning a proper error message
//
// Expected: "undefined variable x" error message
// Actual: "Aborted (core dumped)"

let

    fn test_crash() {
        let
            x = 10;
            macro USE_X(y) { x + y }
            
            result = USE_X(5);
        in
            result
    }

in
    test_crash()
