// Test manual adapter for passing macros to higher-order functions

let
lazy fn lazy_or(a, b) {
    a or b
}

// Manual adapter: converts strict arguments to thunks
fn strict_lazy_or(x, y) {
    lazy_or(x, y)  // Macro will automatically thunk the arguments
}

fn apply_binary(f, x, y) {
    f(x, y)
}

fn main() {
    // Direct lazy fn call - works
    {
        let
            result1 = lazy_or(true, false);
        in
            assert(result1 == true)
    };
    
    // Pass ADAPTER to HOF - works!
    {
        let
            result2 = apply_binary(strict_lazy_or, true, false);
        in
        assert(result2 == true);
    }
}
in
    main();
