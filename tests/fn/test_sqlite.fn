let
    link "dictionary.fn" as dict;
    link "sqliteutils.fn" as sql;
in
    sql.with_database("unicode.db",
        sql.with_statement("select * from unicode",
            fn (statement) {
                let
                    names = sqlite3_names(statement);
                in
                    print(names);
                    nothing;
            }));

    sql.with_database("unicode.db",
        sql.with_statement("select * from unicode where int_code < ?",
            sql.with_bindings([basic_number(0x80)],
                sql.with_results(fn (row) {

                    dict.foreach(fn (k, v) {
                        puts(", ");
                        puts(k);
                        puts(": ");
                        unsafe switch (v) {
                            (basic_null) {
                                []
                            }
                            (basic_number(n)) {
                                putn(n);
                                []
                            }
                            (basic_string(s)) {
                                putc('"');
                                puts(s);
                                puts("\"");
                            }
                        }
                    }, row);
                    putc('\n')
                }))));
