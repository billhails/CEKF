// Test automatic adapter generation for passing macros to higher-order functions

let
lazy fn lazy_or(a, b) {
    a or b
}

fn apply_binary(f, x, y) {
    f(fn () {x}, fn () {y})
}

fn main() {
    // Direct lazy fn call - should work (already does)
    {
        let
            result1 = lazy_or(true, false);
        in
            assert(result1 == true);
    };
    
    // Pass lazy fn to HOF - needs adapter
    {
        let
            result2 = apply_binary(lazy_or, true, false);
        in
        assert(result2 == true);
    }
}
in
    main();
