// Test rational number arithmetic
// Division returns rational numbers (fractions), not integers

let

    // Test: Basic rational creation
    fn test_basic_rationals() {
        let
            r1 = 10 / 3;
            r2 = 7 / 2;
            r3 = 100 / 4;
        in
            // Division creates rationals
            assert(r1 == 10 / 3);
            assert(r2 == 7 / 2);
            assert(r3 == 25);  // Simplified to integer
            puts("Basic rationals test passed")
    }
    
    // Test: Rational equality
    fn test_rational_equality() {
        let
            r1 = 10 / 4;
            r2 = 5 / 2;
            r3 = 15 / 6;
        in
            // Rationals are automatically reduced
            assert(r1 == r2);
            assert(r1 == r3);
            assert(r2 == r3);
            puts("Rational equality test passed")
    }
    
    // Test: Rational addition
    fn test_rational_addition() {
        let
            r1 = 1 / 2;
            r2 = 1 / 3;
            sum = r1 + r2;
            expected = 5 / 6;
        in
            assert(sum == expected);
            puts("Rational addition test passed")
    }
    
    // Test: Rational subtraction
    fn test_rational_subtraction() {
        let
            r1 = 3 / 4;
            r2 = 1 / 4;
            diff = r1 - r2;
        in
            assert(diff == 1 / 2);
            puts("Rational subtraction test passed")
    }
    
    // Test: Rational multiplication
    fn test_rational_multiplication() {
        let
            r1 = 2 / 3;
            r2 = 3 / 4;
            prod = r1 * r2;
        in
            assert(prod == 1 / 2);
            puts("Rational multiplication test passed")
    }
    
    // Test: Rational division
    fn test_rational_division() {
        let
            r1 = 1 / 2;
            r2 = 1 / 4;
            quot = r1 / r2;
        in
            assert(quot == 2);
            puts("Rational division test passed")
    }
    
    // Test: Mixed integer and rational arithmetic
    fn test_mixed_arithmetic() {
        let
            i = 10;
            r = 1 / 2;
            sum = i + r;
            prod = i * r;
        in
            assert(sum == 21 / 2);
            assert(prod == 5);
            puts("Mixed arithmetic test passed")
    }
    
    // Test: Negative rationals
    fn test_negative_rationals() {
        let
            r1 = 0 - (1 / 2);
            r2 = (0 - 3) / 4;
            sum = r1 + r2;
        in
            assert(r1 < 0);
            assert(r2 < 0);
            assert(sum == (0 - 5) / 4);
            puts("Negative rationals test passed")
    }
    
    // Test: Rational comparisons
    fn test_rational_comparisons() {
        let
            r1 = 1 / 2;
            r2 = 1 / 3;
            r3 = 2 / 4;
        in
            assert(r1 > r2);
            assert(r2 < r1);
            assert(r1 == r3);
            assert(r1 >= r3);
            assert(r1 <= r3);
            assert(r1 != r2);
            puts("Rational comparisons test passed")
    }
    
    // Test: Large rational numbers
    fn test_large_rationals() {
        let
            r1 = 1000000000 / 3;
            r2 = 999999999 / 3;
            diff = r1 - r2;
        in
            assert(diff == 1 / 3);
            puts("Large rationals test passed")
    }
    
    // Test: Rational powers
    fn test_rational_powers() {
        let
            r = 1 / 2;
            r2 = r * r;
            r3 = r2 * r;
        in
            assert(r2 == 1 / 4);
            assert(r3 == 1 / 8);
            puts("Rational powers test passed")
    }
    
    // Test: Zero in rationals
    fn test_zero_rationals() {
        let
            r = 1 / 2;
            zero_num = 0 / 5;
        in
            assert(zero_num == 0);
            assert(r + zero_num == r);
            assert(r * zero_num == 0);
            puts("Zero rationals test passed")
    }
    
    // Test: Simplification
    fn test_simplification() {
        let
            r1 = 100 / 200;
            r2 = 50 / 100;
            r3 = 1 / 2;
        in
            assert(r1 == r3);
            assert(r2 == r3);
            assert(r1 == r2);
            puts("Simplification test passed")
    }
    
    // Test: Rational to integer when whole
    fn test_rational_to_integer() {
        let
            r1 = 10 / 2;
            r2 = 100 / 4;
            r3 = 7 / 1;
        in
            assert(r1 == 5);
            assert(r2 == 25);
            assert(r3 == 7);
            puts("Rational to integer test passed")
    }

    // Main test runner
    fn main() {
        test_basic_rationals();
        test_rational_equality();
        test_rational_addition();
        test_rational_subtraction();
        test_rational_multiplication();
        test_rational_division();
        test_mixed_arithmetic();
        test_negative_rationals();
        test_rational_comparisons();
        test_large_rationals();
        test_rational_powers();
        test_zero_rationals();
        test_simplification();
        test_rational_to_integer();
        puts("All rational arithmetic tests completed successfully!")
    }

in
    main()
