// Test that macros are typed with lazy arguments

{
let
    // Define a simple macro
    lazy fn lazy_or(a, b) {
        a or b
    }
    
    // Define a regular function
    fn strict_or(a, b) {
        a or b
    }
    // Check the types are different
    lazy_type = typeof lazy_or;
    strict_type = typeof strict_or;
in
    assert(lazy_type == "#() -> bool -> #() -> bool -> bool");
    assert(strict_type == "bool -> bool -> bool");
    
    // Both should work when called normally
    assert(lazy_or(true, false) == true);
    assert(strict_or(true, false) == true);
    
    assert(lazy_type != strict_type);
};
