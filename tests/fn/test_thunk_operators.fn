// Test the & (thunk) and * (force) Prefix operators

let
    link "../../fn/ioutils.fn" as io;

    operator "$_" 14 io.to_string;

    // Create a thunk using &
    x = &(1 + 2);
    
    // Force the thunk using *
    y = *x;
    
    // Nested thunking
    double_thunk = &(&42);
    
    // Force twice
    value = *(*double_thunk);
in
    assert(typeof x == "#() -> number");
    assert(typeof y == "number");
    
    assert(typeof double_thunk == "#() -> #() -> number");
    assert(typeof value == "number");
    
    assert(y == 3);
    assert(value == 42);
    